#!/usr/bin/env rc

ifs='
'

switch($#*){
case [012]
	echo 'chan FROM TO FILES' >[2=1]
	exit 1
case *
	from=`{echo $1 | sed 's/\\/\\\\/g; s/%/%%/g'}
	to=`{echo $2 | sed 's/\\/\\\\/g; s/%/%%/g'}
	shift 2
}

for(file)
	printf ',s/'$"from'/'$"to'/g\nw\nq\n' | ed $file

