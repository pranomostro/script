#!/usr/bin/env rc
#window size change

switch($#*){
case '0'
	scale='1.2'
	win=`{pfw}
case '1'
	scale=$1
	win=`{pfw}
case '2'
	scale=$1
	win=$2
case *
	echo $0' [SIZE] [WIN]' >[2=1]
	exit 2
}

if(~ $win ''){
	echo 'No focused window found, exiting' >[2=1]
	exit 3
}

w=`{ wattr w $win }
h=`{ wattr h $win }
x=`{ wattr x $win }
y=`{ wattr y $win }
nw=`{ echo $scale'*'$w | bc | sed 's/\..*//' }
nh=`{ echo $scale'*'$h | bc | sed 's/\..*//' }

nxp=`{echo $x'-('$nw'-'$w')/2' | bc}
nyp=`{echo $y'-('$nh'-'$h')/2' | bc}

rw=`{echo `{wattr w `{lsw -r}}'-2*'$BW | bc}
rh=`{echo `{wattr h `{lsw -r}}'-2*'$BW | bc}

if(test $nxp -lt 0) nxp=0
if(test $nyp -lt 0) nyp=0
if(test $nw -gt $rw) nw=$rw
if(test $nh -gt $rh) nh=$rh

wtp $nxp $nyp $nw $nh $win
