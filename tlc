#!/usr/bin/env rc

fn die{
	rm $t
	exit 2
}

fn sigint{ die }; fn sighup{ die }; fn sigalrm{ die }; fn sigfpe{ die }

switch($#*){
case '1'
	f=$1
case *
	echo 'tlc FILE' >[1=2]
	exit 1
}

t=`{mktemp '/tmp/XXXXXX.tlc'}

for(i in `{git log --pretty'=oneline' | awk '{ print($1) }'}){
	git show $i:$f >[2]/dev/null | wc -l
} | grep -v 0 >>$t

tac <$t

rm $t
