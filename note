#!/usr/bin/env rc

curr=`{pfw}
before=`{mktemp '/tmp/XXXXXX.note'}
after=`{mktemp '/tmp/XXXXXX.note'}

h=16
w=`{echo `{wattr w `{lsw -r}}'-(2*'$SG'+2*'$SB')' | bc}
y=`{echo `{wattr h `{lsw -r}}'-('$h'+'$SB'+'$SG')' | bc}

lsw -a | sort >$before
echo $"* | dzen2 -p 32 -bg '#ffffff' -fg '#000000' -fn $FONT -x `{echo $SG'+'$SB | bc} -y $y -w $w &
sleep 0.1

lsw -a | sort >$after

dwin=`{diff $before $after | grep '^>' | awk '{ print($2) }'}
chwb -s $SB -c '0xcc1111' $dwin
ignw -s $dwin

focus $curr

rm $before $after
