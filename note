#!/usr/bin/env rc

curr=`{pfw}
before=`{mktemp '/tmp/note.XXXXXX'}
after=`{mktemp '/tmp/note.XXXXXX'}

h=16
w=`{printf '%d-(2*%d+2*%d)\n' `{wattr w `{lsw -r}} $SG $SB | bc}
y=`{printf '%d-(%d+%d+%d)\n' `{wattr h `{lsw -r}} $h $SB $SG | bc}

lsw -a | sort >$before
printf '%s\n' $"* | dzen2 -p 32 -bg '#ffffff' -fg '#000000' -fn $FONT -x `{printf '%d+%d\n' $SG $SB | bc} -y $y -w $w &
sleep 0.1

lsw -a | sort >$after

dwin=`{diff $before $after | grep '^>' | awk '{ print($2) }'}
chwb -s $SB -c '0xcc1111' $dwin
ignw -s $dwin

focus $curr

rm $before $after
